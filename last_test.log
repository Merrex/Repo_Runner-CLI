ğŸš€ Complete Tier-Based System Test
======================================================================
ğŸ§ª Testing Complete Tier-Based System
============================================================

1ï¸âƒ£ Creating test users:
âœ… Created free user: free_user
   free_user (free): âœ…
âœ… Created advanced user: advanced_user
   advanced_user (advanced): âœ…
âœ… Created premium user: premium_user
   premium_user (premium): âœ…
âŒ Insufficient permissions to create tester user
   tester_user (tester): âŒ
âŒ Insufficient permissions to create admin user
   admin_user (admin): âŒ

2ï¸âƒ£ Testing OrchestratorAgent as Single POC:
   ğŸ“ Created test repository: /tmp/test_repo_g2wfb7p1

   ğŸ”„ Testing with free_user:
âœ… Authenticated as free_user (free)
     Tier: free
     Context Indexer: simple
     GPU Access: False
     ğŸš€ Running OrchestratorAgent...
ğŸ”§ Ensuring packages for local environment...
âœ… requests installed successfully
ğŸ”§ Ensuring packages for local environment...
âœ… requests installed successfully
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
ğŸ”§ Context Indexer initialized: {'use_faiss': False, 'faiss_available': False, 'chunk_count': 0, 'index_type': 'Simple Text', 'config': {}, 'user_info': {}}
ğŸš€ Starting Repo Runner Orchestration with FAISS support
ğŸ” Phase 1: Environment Detection and Analysis
âœ… Environment detected: local
âœ… Project structure detected
âœ… Requirements analyzed
ğŸ“¦ Phase 2: Dependency and Setup
âœ… Dependencies processed
ğŸ”§ Using FAISS recommendation from EnvDetectorAgent: {'agent': 'EnvDetectorAgent', 'recommend_faiss': True, 'reason': 'Local environment has 7.2GB RAM, sufficient for FAISS', 'model': 'all-MiniLM-L6-v2'}
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
ğŸ”§ Context Indexer initialized: {'use_faiss': False, 'faiss_available': False, 'chunk_count': 0, 'index_type': 'Simple Text', 'config': {'use_faiss': True, 'sentence_transformer_model': 'all-MiniLM-L6-v2'}, 'user_info': {}}
âœ… Updated FAISS configuration based on agent recommendations
âœ… Setup completed
ğŸ—„ï¸ Phase 3: Database and Configuration
âœ… Database setup completed
âœ… Configuration processed
ğŸ“ Phase 4: File Processing and Context Indexing
âœ… Files processed
ğŸš€ Phase 5: Execution and Health Monitoring
âœ… Application started
âœ… Health check completed
ğŸ”§ Phase 6: Error Handling and Fixes
âœ… Orchestration completed successfully
     âŒ Orchestration failed: Unknown error
     â±ï¸ Testing rate limiting...
       Request 1: âœ…
       Request 2: âœ…
       Request 3: âœ…
       Request 4: âœ…
       Request 5: âœ…

   ğŸ”„ Testing with advanced_user:
âœ… Authenticated as advanced_user (advanced)
     Tier: advanced
     Context Indexer: faiss
     GPU Access: True
     ğŸš€ Running OrchestratorAgent...
ğŸ”§ Ensuring packages for local environment...
âœ… requests installed successfully
ğŸ”§ Ensuring packages for local environment...
âœ… requests installed successfully
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
ğŸ”§ Context Indexer initialized: {'use_faiss': False, 'faiss_available': False, 'chunk_count': 0, 'index_type': 'Simple Text', 'config': {}, 'user_info': {}}
ğŸš€ Starting Repo Runner Orchestration with FAISS support
ğŸ” Phase 1: Environment Detection and Analysis
âœ… Environment detected: local
âœ… Project structure detected
âœ… Requirements analyzed
ğŸ“¦ Phase 2: Dependency and Setup
âœ… Dependencies processed
ğŸ”§ Using FAISS recommendation from EnvDetectorAgent: {'agent': 'EnvDetectorAgent', 'recommend_faiss': True, 'reason': 'Local environment has 7.2GB RAM, sufficient for FAISS', 'model': 'all-MiniLM-L6-v2'}
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
ğŸ”§ Context Indexer initialized: {'use_faiss': False, 'faiss_available': False, 'chunk_count': 0, 'index_type': 'Simple Text', 'config': {'use_faiss': True, 'sentence_transformer_model': 'all-MiniLM-L6-v2'}, 'user_info': {}}
âœ… Updated FAISS configuration based on agent recommendations
âœ… Setup completed
ğŸ—„ï¸ Phase 3: Database and Configuration
âœ… Database setup completed
âœ… Configuration processed
ğŸ“ Phase 4: File Processing and Context Indexing
âœ… Files processed
ğŸš€ Phase 5: Execution and Health Monitoring
âœ… Application started
âœ… Health check completed
ğŸ”§ Phase 6: Error Handling and Fixes
âœ… Orchestration completed successfully
     âŒ Orchestration failed: Unknown error
     â±ï¸ Testing rate limiting...
       Request 1: âœ…
       Request 2: âœ…
       Request 3: âœ…
       Request 4: âœ…
       Request 5: âœ…

   ğŸ”„ Testing with premium_user:
âœ… Authenticated as premium_user (premium)
     Tier: premium
     Context Indexer: chroma
     GPU Access: True
     ğŸš€ Running OrchestratorAgent...
ğŸ”§ Ensuring packages for local environment...
âœ… requests installed successfully
ğŸ”§ Ensuring packages for local environment...
âœ… requests installed successfully
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
ğŸ”§ Context Indexer initialized: {'use_faiss': False, 'faiss_available': False, 'chunk_count': 0, 'index_type': 'Simple Text', 'config': {}, 'user_info': {}}
ğŸš€ Starting Repo Runner Orchestration with FAISS support
ğŸ” Phase 1: Environment Detection and Analysis
âœ… Environment detected: local
âœ… Project structure detected
âœ… Requirements analyzed
ğŸ“¦ Phase 2: Dependency and Setup
âœ… Dependencies processed
ğŸ”§ Using FAISS recommendation from EnvDetectorAgent: {'agent': 'EnvDetectorAgent', 'recommend_faiss': True, 'reason': 'Local environment has 7.2GB RAM, sufficient for FAISS', 'model': 'all-MiniLM-L6-v2'}
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
ğŸ”§ Context Indexer initialized: {'use_faiss': False, 'faiss_available': False, 'chunk_count': 0, 'index_type': 'Simple Text', 'config': {'use_faiss': True, 'sentence_transformer_model': 'all-MiniLM-L6-v2'}, 'user_info': {}}
âœ… Updated FAISS configuration based on agent recommendations
âœ… Setup completed
ğŸ—„ï¸ Phase 3: Database and Configuration
âœ… Database setup completed
âœ… Configuration processed
ğŸ“ Phase 4: File Processing and Context Indexing
âœ… Files processed
ğŸš€ Phase 5: Execution and Health Monitoring
âœ… Application started
âœ… Health check completed
ğŸ”§ Phase 6: Error Handling and Fixes
âœ… Orchestration completed successfully
     âŒ Orchestration failed: Unknown error
     â±ï¸ Testing rate limiting...
       Request 1: âœ…
       Request 2: âœ…
       Request 3: âœ…
       Request 4: âœ…
       Request 5: âœ…
   ğŸ§¹ Cleaned up test repository

3ï¸âƒ£ Testing Admin Functions:
âŒ User 'admin_user' not found
âœ… Authenticated as free_user (free)
âŒ Insufficient permissions to list users
   âœ… Non-admin correctly denied user listing

4ï¸âƒ£ Testing Context Indexer Tier Restrictions:

   Testing free_user:
âœ… Authenticated as free_user (free)
     simple: âœ…
     faiss: âŒ
     chroma: âŒ
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
     Selected indexer: Simple Text
     User tier: unknown

   Testing advanced_user:
âœ… Authenticated as advanced_user (advanced)
     simple: âœ…
     faiss: âœ…
     chroma: âŒ
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
     Selected indexer: Simple Text
     User tier: unknown

   Testing premium_user:
âœ… Authenticated as premium_user (premium)
     simple: âœ…
     faiss: âœ…
     chroma: âœ…
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
     Selected indexer: Simple Text
     User tier: unknown

5ï¸âƒ£ Testing Workflow Completion:
   ğŸ“ Test repository: /tmp/test_repo_7krvkvo2
   ğŸš€ Running complete workflow...
ğŸ”§ Ensuring packages for local environment...
âœ… requests installed successfully
âš ï¸ FAISS not available: No module named 'faiss'
ğŸ”„ Falling back to simple text search
